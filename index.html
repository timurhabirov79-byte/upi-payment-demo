<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Paytm Deep Link • 10 INR</title>
  <style>
    :root { --bg:#0f1220; --card:#161a2b; --text:#e8ecff; --muted:#9aa3c7; --accent:#6ea8ff; }
    *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--text);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu}
    .wrap{max-width:760px;margin:0 auto;padding:24px}
    .card{background:var(--card);border:1px solid #232844;border-radius:18px;padding:24px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    h1{font-size:24px;margin:0 0 12px}
    p{margin:8px 0;color:var(--muted)}
    .row{display:flex;gap:12px;flex-wrap:wrap;margin-top:16px}
    .btn{appearance:none;border:0;border-radius:12px;padding:14px 18px;font-weight:600;cursor:pointer}
    .btn-primary{background:var(--accent);color:#0f1220}
    .btn-ghost{background:#222846;color:var(--text);border:1px solid #2e3553}
    code{user-select:all;word-break:break-all}
    .hint{margin-top:14px;font-size:14px;color:#b6bfdf}
    .ok{color:#7dffa3}
    .err{color:#ff9b9b}
    footer{margin-top:24px;color:#7f89b3;font-size:13px;text-align:center}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Оплата в Paytm (10 INR)</h1>
      <p>Нажми кнопку ниже на устройстве с Android/Paytm.</p>

      <!-- ТВОЙ ДИПЛИНК -->
      <p><strong>Deep link:</strong><br>
        <code id="deeplink">
          paytmmp://cash_wallet?pa=r.international@ptyes&pn=MsRegentInternational&tn=Order%20Payment&am=10.00&cu=INR&featuretype=money_transfer&tr=ORD-1759138219046
        </code>
      </p>

      <div class="row">
        <button class="btn btn-primary" id="open">Открыть в Paytm</button>
        <button class="btn btn-ghost" id="copy">Скопировать ссылку</button>
      </div>

      <div class="hint" id="status">Готово к открытию. Если ничего не произошло — см. подсказку ниже.</div>

      <details class="hint" style="margin-top:18px">
        <summary>Если не открывается</summary>
        <ul>
          <li>Открой страницу на <b>эмуляторе/телефоне Android</b> с установленным Paytm.</li>
          <li>Убедись, что в браузере разрешены открытия приложений по ссылкам (Open supported links).</li>
          <li>Скопируй диплинк и вставь в адресную строку Chrome → <kbd>Enter</kbd>.</li>
        </ul>
      </details>
    </div>
    <footer>© Demo • Paytm deep link opener</footer>
  </div>

  <script>
    const link = "paytmmp://cash_wallet?pa=r.international@ptyes&pn=MsRegentInternational&tn=Order%20Payment&am=10.00&cu=INR&featuretype=money_transfer&tr=ORD-1759138219046";
    const openBtn = document.getElementById('open');
    const copyBtn = document.getElementById('copy');
    const status = document.getElementById('status');
    const code = document.getElementById('deeplink');

    function isAndroid() { return /Android/i.test(navigator.userAgent); }

    openBtn.addEventListener('click', () => {
      status.textContent = "Пробую открыть Paytm…";
      // Пытаемся открыть приложение
      const started = Date.now();
      window.location.href = link;

      // Если браузер не передал в приложение, покажем подсказку
      setTimeout(() => {
        const elapsed = Date.now() - started;
        if (elapsed < 1800) {
          status.innerHTML = "Похоже, не открылось. " +
            (isAndroid()
              ? "Скопируй ссылку и вставь в Chrome вручную."
              : "Открой эту страницу на Android с установленным Paytm.");
          status.className = "hint err";
        } else {
          status.textContent = "Открыто.";
          status.className = "hint ok";
        }
      }, 1500);
    });

    copyBtn.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(link);
        status.textContent = "Ссылка скопирована в буфер обмена.";
        status.className = "hint ok";
      } catch (e) {
        // fallback
        const r = document.createRange();
        r.selectNode(code);
        const sel = window.getSelection();
        sel.removeAllRanges(); sel.addRange(r);
        const ok = document.execCommand('copy');
        sel.removeAllRanges();
        status.textContent = ok ? "Ссылка скопирована." : "Не удалось скопировать.";
        status.className = "hint " + (ok ? "ok" : "err");
      }
    });
  </script>
</body>
</html>
